<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Botiga</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        .container {
            text-align: center; /* Centra els botons */
        }
        .btn {
            margin: 20px; /* Espai entre botons */
        }
        .table {
            text-align: left;
        }
    </style>
</head>


<body>
<div class="jumbotron bg-dark text-center">
    <h1 style="color: white"><b>Botiga</b></h1>
</div>
<div class="container p-3 my-3 bg-light text-dark">
    <div class="row">
        <h1>Combustibles</h1>
        <table class="table" id="combustiblesTable">
            <thead>
            <tr>
                <th>Nom</th>
                <th>Descripció</th>
                <th>Preu</th>
            </tr>
            </thead>
        </table>
        <h1>Aliments</h1>
        <table class="table" id="AlimentsTable">
            <thead>
            <tr>
                <th>Nom</th>
                <th>Descripció</th>
                <th>Preu</th>
            </tr>
            </thead>
        </table>
        <h1>Material</h1>
        <table class="table" id="MaterialTable">
            <thead>
            <tr>
                <th>Nom</th>
                <th>Descripció</th>
                <th>Preu</th>
            </tr>
            </thead>
        </table>
    </div>

    <!-- Botó ADD -->
    <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#myModal">Afegir Producte</button>

    <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h4 class="modal-title">Afegir Producte</h4>
                    <button type="button" class="close text-danger" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Nom: <input type="text" id="idProduct"></p>
                    <p>Descripció: <input type="text" id="descriptionProduct"></p>
                    <p>Preu: <input type="text" id="priceProduct"></p>
                    <button id="buttonGuardar" class="btn btn-light" data-dismiss="modal" onclick="addProduct()">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón DELETE -->
    <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#myModalDel">Borrar Producte</button>

    <div class="modal fade" id="myModalDel">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h4 class="modal-title">Borrar Producte</h4>
                    <button type="button" class="close text-danger" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Nom: <input type="text" id="idProductDel"></p>
                    <button id="buttonDelete" class="btn btn-light" data-dismiss="modal" onclick="deleteProduct()">Borrar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-sm-4"></div>

<script>
    function addProduct() {
        var id = $("#idProduct").val();
        var description = $("#descriptionProduct").val();
        var price = $("#priceProduct").val();
        var productData= {
            idProduct: id,
            description: description,
            price: price
        };

    }

    var URL = "dsaApp/user/addProduct";
    let fail = $.post({
        url: URL,
        data: JSON.stringify(userData),
        contentType: 'application/json; charset=utf-8'
    })
        .done(function (data, status) {
            alert("Producte afegit" );
        })
        .fail(function (xhr, err) {
            alert("No s'ha pogut conseguir el producte :(");
            location.reload();
        })

    function deleteProduct() {
        var id = $("#idProductDel").val();
        var productData = {
            idProduct: id
        };


        var URL = "dsaApp/user/store/{{id}}";
        $.post({
            url: URL,
            data: JSON.stringify(userData),
            contentType: 'application/json; charset=utf-8'
        })
            .done(function (data, status) {
                alert("Producte eliminat");
            })
            .fail(function (xhr, err) {
                alert("No s'ha pogut eliminar aquest producte :(");
                location.reload();
            })

    }




</script>

</body>
</html>
